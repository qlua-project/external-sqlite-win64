DLL


nmake /f ..\src\Makefile.msc TOP=..\src clean
    USE_ICU=1 USE_ZLIB=1 USE_TCLSH_IN_PATH=1 FOR_WIN10=1 USE_CRT_DLL=1
    STATICALLY_LINK_TCL=1 DYNAMIC_SHELL=0
    SESSION=0 OPTIMIZATIONS=10 SYMBOLS=0
    "OPTIONS=
        -DSQLITE_DQS=0
        -DSQLITE_DEFAULT_MEMSTATUS=0
        -DSQLITE_DEFAULT_WAL_SYNCHRONOUS=1
        -DSQLITE_LIKE_DOESNT_MATCH_BLOBS
        -DSQLITE_MAX_EXPR_DEPTH=0
        -DSQLITE_OMIT_DEPRECATED
        -DSQLITE_OMIT_PROGRESS_CALLBACK
        -DSQLITE_OMIT_SHARED_CACHE
        -DSQLITE_USE_ALLOCA
        -DSQLITE_STRICT_SUBTYPE=1
        -DSQLITE_DEFAULT_FOREIGN_KEYS=1
        -DSQLITE_ENABLE_NULL_TRIM
        -DSQLITE_TEMP_STORE=3
        -DSQLITE_OMIT_GET_TABLE
        -DSQLITE_OMIT_AUTHORIZATION
        -DSQLITE_OMIT_TRACE
        -DSQLITE_ENABLE_JSON1
        -DSQLITE_OMIT_TCL_VARIABLE"

cl -nologo -W4 -I. -I..\src -I..\src\src -fp:precise /d2guard4 -MD -DNDEBUG -Ox -Zi -Fosqlite3.lo -Fdsqlite3.pdb -c sqlite3.c
    -DSQLITE_HAVE_ZLIB=1 -I..\src\compat\zlib
    -DSQLITE_ENABLE_ICU=1 -I..\src\ext\icu -I..\src\compat\icu\include
(+) -DSQLITE_API=__declspec(dllexport)
    -D_ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE
    -DINCLUDE_MSVC_H=1
    -DSTATIC_BUILD
    -D_CRT_SECURE_NO_DEPRECATE -D_CRT_SECURE_NO_WARNINGS
    -D_CRT_NONSTDC_NO_DEPRECATE -D_CRT_NONSTDC_NO_WARNINGS
    -DSQLITE_OS_WIN=1
    -DSQLITE_ENABLE_API_ARMOR=1
        -DSQLITE_THREADSAFE=1
        -DSQLITE_THREAD_OVERRIDE_LOCK=-1
        -DSQLITE_MAX_TRIGGER_DEPTH=100
            -DSQLITE_ENABLE_FTS3=1
            -DSQLITE_ENABLE_FTS5=1
            -DSQLITE_ENABLE_RTREE=1
            -DSQLITE_ENABLE_GEOPOLY=1
            -DSQLITE_ENABLE_STMTVTAB=1
            -DSQLITE_ENABLE_DBPAGE_VTAB=1
            -DSQLITE_ENABLE_DBSTAT_VTAB=1
            -DSQLITE_ENABLE_BYTECODE_VTAB=1
        -DSQLITE_ENABLE_COLUMN_METADATA=1
            -DSQLITE_DQS=0
            -DSQLITE_DEFAULT_MEMSTATUS=0
            -DSQLITE_DEFAULT_WAL_SYNCHRONOUS=1
            -DSQLITE_LIKE_DOESNT_MATCH_BLOBS
            -DSQLITE_MAX_EXPR_DEPTH=0
            -DSQLITE_OMIT_DEPRECATED
            -DSQLITE_OMIT_PROGRESS_CALLBACK
            -DSQLITE_OMIT_SHARED_CACHE
            -DSQLITE_USE_ALLOCA
            -DSQLITE_STRICT_SUBTYPE=1
        -DSQLITE_DEFAULT_FOREIGN_KEYS=1
        -DSQLITE_ENABLE_NULL_TRIM
        -DSQLITE_TEMP_STORE=3
        -DSQLITE_OMIT_GET_TABLE
        -DSQLITE_OMIT_AUTHORIZATION
        -DSQLITE_OMIT_TRACE
        -DSQLITE_ENABLE_JSON1
        -DSQLITE_OMIT_TCL_VARIABLE
            -DSQLITE_ENABLE_MATH_FUNCTIONS
            -DSQLITE_ENABLE_FTS4=1
            -DSQLITE_SYSTEM_MALLOC=1
            -DSQLITE_OMIT_LOCALTIME=1


SHELL


nmake /f ..\src\Makefile.msc TOP=..\src shell
    USE_ICU=1 USE_ZLIB=1 USE_TCLSH_IN_PATH=1 FOR_WIN10=1 USE_CRT_DLL=1
    STATICALLY_LINK_TCL=1 DYNAMIC_SHELL=0
    SESSION=0 OPTIMIZATIONS=10
(+) SYMBOLS=0
   "OPTIONS=
        -DSQLITE_DQS=0
        -DSQLITE_DEFAULT_MEMSTATUS=0
        -DSQLITE_DEFAULT_WAL_SYNCHRONOUS=1
        -DSQLITE_LIKE_DOESNT_MATCH_BLOBS
        -DSQLITE_MAX_EXPR_DEPTH=0
        -DSQLITE_OMIT_DEPRECATED
        -DSQLITE_OMIT_PROGRESS_CALLBACK
        -DSQLITE_OMIT_SHARED_CACHE
        -DSQLITE_USE_ALLOCA
        -DSQLITE_STRICT_SUBTYPE=1
        -DSQLITE_DEFAULT_FOREIGN_KEYS=1
        -DSQLITE_ENABLE_NULL_TRIM
        -DSQLITE_TEMP_STORE=3
        -DSQLITE_OMIT_GET_TABLE
(-)     #-DSQLITE_OMIT_AUTHORIZATION  (error C2065: 'safeModeAuth': undeclared)
        -DSQLITE_OMIT_TRACE
        -DSQLITE_ENABLE_JSON1
        -DSQLITE_OMIT_TCL_VARIABLE"

cl -nologo -W4 -I. -I..\src -I..\src\src -fp:precise /d2guard4 -MD -DNDEBUG -O2 -Fewinsqlite3shell.exe shell.c sqlite3.c
    -DSQLITE_HAVE_ZLIB=1 -I..\src\compat\zlib
    -DSQLITE_ENABLE_ICU=1 -I..\src\ext\icu -DICU_WIN10=1
    -D_ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE
    -DINCLUDE_MSVC_H=1
    -DSTATIC_BUILD
(+) -DHAVE_READLINE=0
    -D_CRT_SECURE_NO_DEPRECATE -D_CRT_SECURE_NO_WARNINGS
    -D_CRT_NONSTDC_NO_DEPRECATE -D_CRT_NONSTDC_NO_WARNINGS
    -DSQLITE_OS_WIN=1
        -DSQLITE_THREADSAFE=1
        -DSQLITE_THREAD_OVERRIDE_LOCK=-1
            -DSQLITE_MAX_TRIGGER_DEPTH=100
            -DSQLITE_ENABLE_FTS3=1
            -DSQLITE_ENABLE_FTS5=1
            -DSQLITE_ENABLE_RTREE=1
            -DSQLITE_ENABLE_GEOPOLY=1
            -DSQLITE_ENABLE_STMTVTAB=1
            -DSQLITE_ENABLE_DBPAGE_VTAB=1
            -DSQLITE_ENABLE_DBSTAT_VTAB=1
            -DSQLITE_ENABLE_BYTECODE_VTAB=1
        -DSQLITE_ENABLE_COLUMN_METADATA=1
            -DSQLITE_DQS=0
            -DSQLITE_DEFAULT_MEMSTATUS=0
            -DSQLITE_DEFAULT_WAL_SYNCHRONOUS=1
            -DSQLITE_LIKE_DOESNT_MATCH_BLOBS
            -DSQLITE_MAX_EXPR_DEPTH=0
            -DSQLITE_OMIT_DEPRECATED
            -DSQLITE_OMIT_PROGRESS_CALLBACK
            -DSQLITE_OMIT_SHARED_CACHE
            -DSQLITE_USE_ALLOCA
            -DSQLITE_STRICT_SUBTYPE=1
        -DSQLITE_DEFAULT_FOREIGN_KEYS=1
        -DSQLITE_ENABLE_NULL_TRIM
        -DSQLITE_TEMP_STORE=3
        -DSQLITE_OMIT_GET_TABLE
        -DSQLITE_OMIT_TRACE
        -DSQLITE_ENABLE_JSON1
        -DSQLITE_OMIT_TCL_VARIABLE
            -DSQLITE_ENABLE_MATH_FUNCTIONS
            -DSQLITE_ENABLE_FTS4=1
            -DSQLITE_SYSTEM_MALLOC=1
            -DSQLITE_OMIT_LOCALTIME=1
        -DSQLITE_DQS=0
        -DSQLITE_ENABLE_FTS4=1
(+)     -DSQLITE_ENABLE_EXPLAIN_COMMENTS=1
(+)     -DSQLITE_ENABLE_OFFSET_SQL_FUNC=1
(+)     -DSQLITE_ENABLE_UNKNOWN_SQL_FUNCTION=1
(+)     -DSQLITE_ENABLE_STMT_SCANSTATUS=1
        -DSQLITE_STRICT_SUBTYPE=1
  /link /guard:cf /NOLOGO /MACHINE:x64 /DYNAMICBASE sqlite3res.lo mincore.lib icu.lib
     /DEFAULTLIB:ucrt.lib
     /NODEFAULTLIB:kernel32.lib
     /NODEFAULTLIB:libucrt.lib
     "/LIBPATH:C:\Program Files (x86)\Windows Kits\10\lib\10.0.20348.0\ucrt\x64"
     /LIBPATH:..\src\compat\zlib zlib.lib

